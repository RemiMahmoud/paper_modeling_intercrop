[1] TRUE
   slope_height_cereal slope_height_legume lambda_height_cereal lambda_height_legume slope_biomass_cereal slope_biomass_legume lambda_biomass_cereal lambda_biomass_legume
67                   1                   1                    1                    1                    1                    1                     1                     1
3                    1                   1                    1                    1                    1                    1                     1                     1
9                    1                   1                    1                    1                    1                    1                     1                     1
6                    1                   1                    1                    1                    0                    0                     0                     0
1                    0                   0                    0                    0                    1                    1                     1                     1
                     1                   1                    1                    1                    6                    6                     6                     6
   max_LAI_cereal max_LAI_SC_cereal max_sla_GLT_SC_cereal max_sla_GLT_cereal max_LAI_legume max_LAI_SC_legume max_sla_GLT_SC_legume max_sla_GLT_legume    
67              1                 1                     1                  1              1                 1                     1                  1   0
3               1                 1                     1                  1              0                 0                     0                  0   4
9               0                 0                     0                  0              0                 0                     0                  0   8
6               0                 0                     0                  0              0                 0                     0                  0  12
1               1                 1                     1                  1              1                 1                     1                  1   4
               15                15                    15                 15             18                18                    18                 18 160
# A tibble: 23 × 3
   name                                     data                icc
   <chr>                                    <list>            <dbl>
 1 cover_before_800_normalized_tt           <tibble [86 × 3]> 0.887
 2 cover_before_800_normalized_tt_SC_cereal <tibble [86 × 3]> 0.884
 3 cover_before_800_normalized_tt_SC_legume <tibble [86 × 3]> 0.833
 4 max_LAI_legume                           <tibble [86 × 3]> 0.699
 5 max_LAI_cereal                           <tibble [86 × 3]> 0.699
 6 max_LAI_SC_legume                        <tibble [86 × 3]> 0.803
 7 max_LAI_SC_cereal                        <tibble [86 × 3]> 0.588
 8 max_sla_GLT_SC_cereal                    <tibble [86 × 3]> 0.840
 9 max_sla_GLT_SC_legume                    <tibble [86 × 3]> 0.643
10 max_sla_GLT_cereal                       <tibble [86 × 3]> 0.672
# … with 13 more rows
# ℹ Use `print(n = ...)` to see more rows
function (x, cluster = FALSE, sort_miss = FALSE, show_perc = TRUE, 
    show_perc_col = TRUE, large_data_size = 9e+05, warn_large_data = TRUE) 
{
    test_if_dataframe(x)
    if (ncol(x) * nrow(x) > large_data_size && warn_large_data) {
        stop("Data exceeds recommended size for visualisation, please consider\n         downsampling your data, or set argument 'warn_large_data' to FALSE.")
    }
    x.na <- is.na(x)
    if (cluster) {
        row_order_index <- stats::dist(x.na * 1) %>% stats::hclust(method = "mcquitty") %>% 
            stats::as.dendrogram() %>% stats::order.dendrogram()
    }
    else {
        row_order_index <- seq_len(nrow(x))
    }
    if (sort_miss) {
        na_sort <- order(colSums(is.na(x)), decreasing = TRUE)
        col_order_index <- names(x)[na_sort]
    }
    else if (!sort_miss) {
        col_order_index <- names(x)
    }
    dat_pre_vis <- as.data.frame(x.na[row_order_index, ])
    d <- dat_pre_vis %>% vis_gather_() %>% dplyr::mutate(value = vis_extract_value_(dat_pre_vis))
    if (show_perc) {
        temp <- miss_guide_label(x)
        p_miss_lab <- temp$p_miss_lab
        p_pres_lab <- temp$p_pres_lab
    }
    else {
        p_miss_lab <- "Missing"
        p_pres_lab <- "Present"
    }
    vis_miss_plot <- vis_create_(d) + ggplot2::scale_fill_manual(name = "", 
        values = c("grey80", "grey20"), labels = c(p_pres_lab, 
            p_miss_lab)) + ggplot2::guides(fill = ggplot2::guide_legend(reverse = TRUE)) + 
        ggplot2::theme(legend.position = "bottom") + ggplot2::theme(axis.text.x = ggplot2::element_text(hjust = 0))
    if (ncol(x) == 1) {
        if (show_perc_col) {
            return(vis_miss_plot + ggplot2::scale_x_discrete(position = "top", 
                labels = label_col_missing_pct(x, col_order_index)))
        }
        else if (!show_perc_col) {
            return(vis_miss_plot + ggplot2::scale_x_discrete(position = "top", 
                labels = col_order_index))
        }
    }
    if (show_perc_col) {
        vis_miss_plot + ggplot2::scale_x_discrete(position = "top", 
            limits = col_order_index, labels = label_col_missing_pct(x, 
                col_order_index))
    }
    else {
        vis_miss_plot + ggplot2::scale_x_discrete(position = "top", 
            limits = col_order_index)
    }
}
<bytecode: 0x000001aa85de5730>
<environment: namespace:visdat>

